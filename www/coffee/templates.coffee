window.Templates = { }
class Component
    constructor: (html, init, @destructor) ->
        @dom = $ html
        init? @dom
    
    destroy: ->
        @destructor? @dom
        @dom.remove()
        @dom = null
        
    get: (selector) ->
        $ selector, @dom


class Templates.GoalOption extends Component
    constructor: (name) -> 
        super \
        """
        <option></option>
        """,
        
        (dom) =>
            dom.html name
            dom.attr "selected", "selected" if localStorage.goal == name
            
            
class Templates.Option extends Component
    constructor: (task, click) ->
        super \
        """
        <li>
            <input type="button" value="+" class="add" />
            <input type="button" value="-" class="sub" />
            <span class="name" />
        </li>
        """,
        
        =>
            (@get ".name").html task
            (@get ".add").on "click", =>
                click?()
            (@get ".sub").on "click", =>
                @destroy()

window.Images = (image) ->
    switch image
        when "dog" then []
    
            
class Templates.TaskButton extends Component
    constructor: (image, points) ->
        super \
        """
        <a>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="task">
        </svg>
        </a>
        """,

        =>
            for path in @getImage image
                elem = $ "<path></path>"
                elem.attr "d", path
                @get("svg").append elem
            
            @dom.html @dom.html()
            
            @dom.on "click", =>
                bee.addData "upkeep-test", points
    
    getImage: (image) ->
        switch image
            when "dog" then [
                """M84.217,27.754c-0.268-1.052,0.433-2.254,0-3.336c-0.307-0.77-1.409-1.346-2.293-2.085  c-1.752-1.464-2.955-2.518-5.005-3.337c-0.2-2.833,0.378-5.763-1.042-7.923c-4.134,2.053-3.531,8.841-9.385,9.174  c-2.946-1.644-4.215-6.944-8.757-5.63c-1.472,3.972,0.495,9.178,1.042,13.137c-0.906,1.374-1.85,2.575-2.889,3.567  c0.004,0.237-0.087,0.475-0.275,0.648c-0.1,0.092-0.163,0.197-0.149,0.413c0.106,1.666,3.952,5.07,5.89,6.439  c0.453,0.32,0.911,0.665,1.396,1.028c1.62,1.217,3.457,2.597,5.226,3.067c0.672,0.179,1.771,0.145,2.834,0.111  c1.965-0.061,3.988-0.12,5.05,0.966c3.286-1.194,7.123-0.729,9.193-3.312c1.61-2.011,2.401-4.864,2.502-8.549  C86.906,30.197,84.746,29.836,84.217,27.754z"""
                """M70.375,45.988c0-0.473,0.232-0.902,0.604-1.244c-0.116,0.003-0.234,0.007-0.346,0.01c-1.242,0.038-2.415,0.074-3.332-0.17  c-2.092-0.557-4.071-2.043-5.816-3.354c-0.475-0.356-0.923-0.692-1.356-0.999c-0.062-0.043-5.868-4.181-6.551-7.316  c-0.149,0.088-0.297,0.182-0.451,0.262c-5.636,2.938-10.795-0.355-17.933-0.834c-6.185-0.415-10.559,0.943-13.554,3.754  c-3.404-0.4-2.768,2.434-3.336,5.004c-0.358,1.617-1.385,2.817-1.668,3.754c-1.492,4.932-1.933,14.828-2.919,20.852  c-0.429,2.617-1.188,4.806-1.251,6.465c-0.093,2.431,0.11,8.658,1.459,10.217c1.312,1.517,6.641,1.223,6.881-0.417  c0.234-1.602-2.615-1.576-3.336-3.127c-0.725-1.558-0.355-5.277,0.417-7.299c0.909-2.38,3.028-4.792,4.379-7.298  c1.411-2.618,3.101-4.819,4.587-7.09c2.2,1.777,3.26,0.065,4.796-0.626c2.026,1.701,0.185,4.709,0.208,7.507  c0.005,0.56,0.319,1.232,0.417,1.877c0.41,2.682,0.048,6.071,0.626,7.507c0.649,1.613,7.031,3.54,7.506,0.833  c0.247-1.405-2.616-2.038-3.127-3.335c-1.197-3.038,0.654-9.5,2.502-10.219c1.641,1.418,3.335,2.782,5.213,3.963  c2.422,7.741,1.176,16.659,3.128,23.354c1.956,0.785,6.103,1.581,8.132,0c-0.341-2.829-3.425-3.66-3.754-6.881  c-0.479-4.708,1.249-9.892,1.877-14.805c2.533-2.124,7.641-1.674,10.635-3.337c1.654,6.805-1.385,14.705,1.46,20.019  c2.253,1.055,5.97,1.373,7.298-0.626c-0.354-1.778-2.557-1.979-3.127-3.544c-1.666-4.565,1.965-9.347,2.502-13.972  c0.23-1.995-0.025-4.114,0.208-6.047c0.333-2.75,1.417-5.188,1.46-7.507c0.023-1.239-0.22-2.447-0.363-3.631  c-0.406,0.183-0.878,0.294-1.387,0.294C71.579,47.98,70.375,47.088,70.375,45.988z"""
                """M73.062,43.995c-0.846,0-1.591,0.296-2.084,0.749c-0.371,0.342-0.604,0.771-0.604,1.244  c0,1.101,1.204,1.993,2.688,1.993c0.509,0,0.98-0.111,1.387-0.294c0.776-0.349,1.301-0.976,1.301-1.699  C75.75,44.887,74.546,43.995,73.062,43.995z"""
            ]
            when "afro" then [
                """M31.999,59.971c-0.356,1.319-0.558,2.823-0.558,4.421c0,2.959,0.69,5.6,1.771,7.338c2.34,1.392,4.307,4.215,5.565,7.881   c2.568-2.233,7.076-2.299,8.312-2.299h2.938h2.939c1.235,0,5.742,0.065,8.312,2.299c1.258-3.666,3.225-6.489,5.564-7.881   c1.08-1.738,1.771-4.379,1.771-7.338c0-1.598-0.201-3.102-0.56-4.421l-0.008-0.027c-0.326-1.338-0.523-2.808-0.523-4.453   c0-1.507,0.155-2.929,0.427-4.186c0.094-0.408,0.149-0.822,0.149-1.262c0-2.861-2.157-5.181-4.818-5.181   c-1.38,0-2.617,0.625-3.51,1.634l-0.124,0.146c-2.258,2.642-5.694,4.328-9.547,4.328h-0.075h-0.076   c-3.851,0-7.288-1.687-9.547-4.328l-0.123-0.146c-0.892-1.009-2.13-1.634-3.511-1.634c-2.66,0-4.817,2.319-4.817,5.181   c0,0.36,0.037,0.703,0.103,1.038c0.306,1.311,0.479,2.812,0.479,4.409c0,1.646-0.197,3.115-0.523,4.453L31.999,59.971   L31.999,59.971z M50.027,81.697l-0.146-0.001c0,0-1.831,0.005-5.327,0.245c-3.493,0.24-2.991,4.707-2.493,6.682   c0.383,1.511,1.678,3.045,3.059,3.316c2.802,0.37,3.848-0.984,3.848-2.599c0-1.058,0.135-1.687-1.684-2.665   c-0.687-0.358-1.132-0.938-1.089-1.834c1.177,0.196,2.463,0.304,3.808,0.304h0.024h0.024c1.346,0,2.631-0.107,3.809-0.304   c0.044,0.896-0.402,1.476-1.09,1.834c-1.817,0.979-1.682,1.607-1.682,2.665c0,1.614,1.045,2.969,3.847,2.599   c1.381-0.271,2.677-1.806,3.058-3.316c0.499-1.975,1.002-6.441-2.493-6.682c-3.494-0.24-5.327-0.245-5.327-0.245L50.027,81.697   L50.027,81.697z M27.806,57.569c-1.035,1.629-1.456,3.95-0.994,6.438c0.603,3.244,2.537,5.877,4.816,6.918L27.806,57.569   L27.806,57.569z M68.478,70.754c2.126-1.14,3.898-3.667,4.468-6.746c0.433-2.32,0.095-4.496-0.793-6.1L68.478,70.754L68.478,70.754   z M3.068,38.634C3.068,17.527,24.08,0.417,50,0.417c25.919,0,46.931,17.11,46.931,38.217c0,16.064-12.171,29.812-29.411,35.467   l-0.75,2.62c-1.64,6.162-2.461,11.838-3.714,14.512c-1.032,4.364-6.436,8.069-12.889,8.069l-0.14-0.001l-0.139,0.001   c-6.455,0-11.856-3.705-12.89-8.069c-1.252-2.674-2.073-8.35-3.713-14.512l-0.744-2.6C15.268,68.48,3.068,54.718,3.068,38.634   L3.068,38.634z M37.108,63.135c0.499-0.494,1.988-1.79,4.125-2.088c2.394-0.333,3.649,1.688,3.873,2.088H37.108L37.108,63.135z    M35.153,59.545c1.141-1.392,3.199-2.401,5.605-2.57c1.942-0.136,3.735,0.303,5.052,1.119l1.409,3.586   c-1.683-1.59-4.551-2.709-7.667-2.803C37.894,58.826,36.388,59.076,35.153,59.545L35.153,59.545z M64.604,59.545   c-1.234-0.469-2.739-0.719-4.398-0.668c-3.116,0.094-5.984,1.213-7.668,2.803l1.409-3.586c1.316-0.816,3.11-1.255,5.053-1.119   C61.405,57.144,63.464,58.153,64.604,59.545L64.604,59.545z M62.649,63.135h-7.997c0.222-0.4,1.479-2.421,3.872-2.088   C60.662,61.345,62.15,62.641,62.649,63.135L62.649,63.135z"""
            ]